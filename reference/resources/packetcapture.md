---
title: PacketCapture
description: API for this Calico Enterprise resource. 
canonical_url: '/reference/resources/packetcapture'
---

A Packet Capture resource (`PacketCapture`) represents captured live traffic for debugging microservices and application
interaction inside a Kubernetes cluster.

{{site.prodname}} supports selecting one or multiple [WorkloadEndpoints resources]({{site.baseurl}}/reference/resources/workloadendpoint)
as described in the [Packet Capture] guide.

For `calicoctl` [commands]({{site.baseurl}}/reference/calicoctl/), the following case-insensitive aliases
may be used to specify the resource type on the CLI:
`packetcapture`, `packetcaptures`.

For `kubectl` [commands](https://kubernetes.io/docs/reference/kubectl/overview/), the following case-insensitive aliases may be used to specify the resource type on the CLI: 
`packetcapture`,`packetcaptures`, `packetcapture.projectcalico.org`, `packetcaptures.projectcalico.org` as well as
abbreviations such as `packetcapture.p` and `packetcaptures.p`.

### Sample YAML

```yaml
apiVersion: projectcalico.org/v3
kind: PacketCapture
metadata:
  name: sample-capture
  namespace: sample-namespace
spec:
  selector: k8s-app == "sample-app"
  filters:
    - protocol: TCP
    - ports:
      - 80
```

### Packet capture definition

#### Metadata

| Field     | Description                                                        | Accepted Values                                     | Schema | Default   |
|-----------|--------------------------------------------------------------------|-----------------------------------------------------|--------|-----------|
| name      | The name of the packet capture. Required.                          | Alphanumeric string with optional `.`, `_`, or `-`. | string |           |
| namespace | Namespace provides an additional qualification to a resource name. |                                                     | string | "default" |


#### Spec

| Field    | Description                                                                                         | Accepted Values | Schema                | Default |
|----------|-----------------------------------------------------------------------------------------------------|-----------------|-----------------------|---------|
| selector | Selects the endpoints to which this packet capture applies.                                         |                 | [selector](#selector) |         |
| filters  | The ordered set of filters applied to traffic captured from an interface.                           |                 | [filters](#filters)   |         |


#### Selector

{% include content/selectors.md %}

#### Filters

| Field    | Description                              | Accepted Values                                             | Schema              | Default |
|----------|------------------------------------------|-------------------------------------------------------------|---------------------|---------|
| protocol | Positive protocol match.                 | `TCP`, `UDP`, `ICMP`, `ICMPv6`, `SCTP`, `UDPLite`, `1`-`255`| string \| integer   |         |
| ports    | Positive match on the specified ports    |                                                             | list of ports       |         |

{% include content/ports.md %}

#### Status

PacketCaptureStatus lists the capture files generated by a PacketCapture.

| Field | Description |
|-------|---|
| files | It describes the location of the packet capture files that is identified via a node, its directory and the file names generated. |

#### Files

| Field     | Description |
|-----------|---|
| directory | The path inside the calico-node container for the the generated files. |
| fileNames | The name of the generated file for a PacketCapture ordered alphanumerically. </br> The active packet capture file will be identified using the following schema: "{workload endpoint name}_{host network interface}.pcap". </br> Rotated capture files name will contain an index matching the rotation timestamp. |
| node      | The hostname of the Kubernetes node the files are located on. |

[Packet Capture]: /visibility/packetcapture

