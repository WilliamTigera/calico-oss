---
layout: null
---
# {{site.prodname}} Version {{site.data.versions[page.version].first.title}}
# {{site.baseurl}}{{page.version}}/releases#{{site.data.versions[page.version].first.title}}
# This manifest includes the following component versions:
#   {{page.registry}}{{site.imageNames["calicoq"]}}:{{site.data.versions[page.version].first.components["calicoq"].version}}

apiVersion: v1
kind: Pod
metadata:
  name: calicoq
  namespace: kube-system
spec:
  hostNetwork: true
  imagePullSecrets:
  - name: cnx-pull-secret
  containers:
  - name: calicoq
    image: {{page.registry}}{{site.imageNames["calicoq"]}}:{{site.data.versions[page.version].first.components["calicoq"].version}}
    command: ["/bin/sh", "-c", "while true; do sleep 3600; done"]
    env:
    - name: ETCD_ENDPOINTS
      valueFrom:
        configMapKeyRef:
          name: calico-config
          key: etcd_endpoints
    # Location of the CA certificate for etcd.
    - name: ETCD_CA_CERT_FILE
      valueFrom:
        configMapKeyRef:
          name: calico-config
          key: etcd_ca
    # Location of the client key for etcd.
    - name: ETCD_KEY_FILE
      valueFrom:
        configMapKeyRef:
          name: calico-config
          key: etcd_key
    # Location of the client certificate for etcd.
    - name: ETCD_CERT_FILE
      valueFrom:
        configMapKeyRef:
          name: calico-config
          key: etcd_cert
    # Sets Default Security Groups if tigera-aws-config exists
    - name: TIGERA_DEFAULT_SECURITY_GROUPS
      valueFrom:
        configMapKeyRef:
          name: tigera-aws-config
          key: default_sgs
          optional: true
    # Sets Pod Security Group if tigera-aws-config exists
    - name: TIGERA_POD_SECURITY_GROUP
      valueFrom:
        configMapKeyRef:
          name: tigera-aws-config
          key: pod_sg
          optional: true
    volumeMounts:
    - mountPath: /calico-secrets
      name: etcd-certs
    # Uncomment and edit these lines to enable a secrets volume for use with federated endpoint identity. Add
    # multiple entries to the volumeMounts if you are mounting in multiple secrets (e.g. one for each remote cluster)
    #- name: tigera-federation-remotecluster
    #  mountPath: "/etc/tigera-federation-remotecluster"
    #  readOnly: true
  volumes:
  - name: etcd-certs
    secret:
      secretName: calico-etcd-secrets
  # Uncomment and edit these lines to enable a secrets volume for use with federated endpoint identity. Add
  # multiple entries to the volumes if you are mounting in multiple secrets (e.g. one for each remote cluster)
  # The secret should be created with: kubectl create secret generic tigera-federation-remotecluster --from-file=...
  # These are the same secrets as configured in the calico-typha manifest.
  #- name: tigera-federation-remotecluster
  #  secret:
  #    secretName: tigera-federation-remotecluster
  #    defaultMode: 0400
