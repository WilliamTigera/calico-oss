# Once applied to your managed cluster, a deployment is created to establish a secure tcp connection
# with the management cluster.

apiVersion: operator.tigera.io/v1
kind: ManagementClusterConnection
metadata:
  name: tigera-secure
spec:
  # ManagementClusterAddr should be the externally reachable address to which your managed cluster
  # will connect. Valid examples are: "0.0.0.0:31000", "example.com:32000", "[::1]:32500"
  managementClusterAddr: "${HOST}:${PORT}"

---

apiVersion: v1
kind: Secret
metadata:
  name: tigera-managed-cluster-connection
  namespace: tigera-operator
type: Opaque
data:
  # This is the certificate of the management cluster side of the tunnel.
  management-cluster.crt: {{.VoltronCert | base64}}
  # The certificate and private key that are created and signed by the CA in the management cluster.
  managed-cluster.crt: {{.GuardianTLSCert | base64}}
  managed-cluster.key: {{.GuardianTLSKey | base64}}
