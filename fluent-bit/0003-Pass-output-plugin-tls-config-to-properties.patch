From aa676ef6f3e8dd24991391ddf1cfae80247361db Mon Sep 17 00:00:00 2001
From: Jiawei Huang <jiawei@tigera.io>
Date: Sun, 18 Aug 2024 00:34:26 -0700
Subject: [PATCH] Pass output plugin tls config to properties

---
 src/flb_output.c | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/src/flb_output.c b/src/flb_output.c
index 1c7853f79..59b3f2c54 100644
--- a/src/flb_output.c
+++ b/src/flb_output.c
@@ -871,6 +871,10 @@ int flb_output_set_property(struct flb_output_instance *ins,
     }
     else if (prop_key_check("tls.verify", k, len) == 0 && tmp) {
         ins->tls_verify = flb_utils_bool(tmp);
+        kv = flb_kv_item_create(&ins->properties, (char *) k, NULL);
+        if (kv) {
+            kv->val = ins->tls_verify ? "true" : "false";
+        }
         flb_sds_destroy(tmp);
     }
     else if (prop_key_check("tls.verify_hostname", k, len) == 0 && tmp) {
-- 
2.46.0

