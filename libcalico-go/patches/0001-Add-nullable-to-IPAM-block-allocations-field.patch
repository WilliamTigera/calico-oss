From 408b4a2511963669b4e39616e95941b90c317f76 Mon Sep 17 00:00:00 2001
From: Dimitri Nicolopoulos <dimitri@tigera.io>
Date: Wed, 16 Apr 2025 14:58:10 -0700
Subject: [PATCH] Add nullable to IPAM block allocations field

---
 libcalico-go/config/crd/crd.projectcalico.org_ipamblocks.yaml | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/libcalico-go/config/crd/crd.projectcalico.org_ipamblocks.yaml b/libcalico-go/config/crd/crd.projectcalico.org_ipamblocks.yaml
index b2437bad2c..c7149c844a 100644
--- a/libcalico-go/config/crd/crd.projectcalico.org_ipamblocks.yaml
+++ b/libcalico-go/config/crd/crd.projectcalico.org_ipamblocks.yaml
@@ -31,6 +31,9 @@ spec:
               allocations:
                 items:
                   type: integer
+                  # TODO: This nullable is manually added in. We should update controller-gen
+                  # to handle []*int properly itself.
+                  nullable: true
                 type: array
               attributes:
                 items:
-- 
2.43.0

