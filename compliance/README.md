# Tigera compliance

Components related to the compliance dashboard and reporting feature of Calico Enterprise.

* `config-snapshotter/` - Periodic snapshotter required for configuration replays using audit logs
* `report-generator/` - The job that generates a report
* `report-generator-scheduler/` - The scheduler used for creating single-run report-generator jobs

## Benchmarker

Compliance benchmarker uses [aquasecurity/kube-bench](https://github.com/aquasecurity/kube-bench) to perform
[CIS benchmarking](https://www.cisecurity.org/benchmark/kubernetes/). The CIS benchmark standards may or may not change
when a new version of kubernetes is released. It is up to the developer to check if new CIS benchmarks are introduced,
and if it did, update the kube-bench image as needed.The platform support matrix is mapped in
[CIS Kubernetes Benchmark support](https://github.com/aquasecurity/kube-bench/blob/main/docs/platforms.md).

As of now CIS benchmarks are the only benchmarks benchmarker implements.

### When and How to update kube-bench

When a new CIS benchmark standard is introduced, and is implemented by kube-bench, we should update the kube-bench version.
The kube-bench version is defined in the top-level [`go.mod`](https://github.com/tigera/calico-private/blob/master/go.mod).

## Interface mocking

Most mocks are [testify mocks](https://github.com/stretchr/testify/#mock-package) generated using [mockery](https://github.com/vektra/mockery).
The mocks generated using mockery can be found in the environment variable `MOCKERY_FILE_PATHS`, and can be regenerated by running
``make gen-mocks``.
