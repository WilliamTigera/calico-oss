{{- $elasticMode := include "calico.elasticsearch.mode" . }}
{{- if eq $elasticMode "external" }}
kind: Secret
apiVersion: v1
metadata:
  name: tigera-es-proxy
  namespace: calico-monitoring
data:
{{ include "calico.esProxy.tls" . | indent 2 }}
  backend-ca.crt: {{ .Values.elasticsearch.tls.ca | b64enc }}
  backend.authHeader: {{ printf "%s:%s" .Values.elasticsearch.manager.username .Values.elasticsearch.manager.password | b64enc | b64enc }}
{{- end }}
