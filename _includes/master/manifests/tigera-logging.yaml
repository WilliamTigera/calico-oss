{% comment %}
tigera-logging.yaml acccepts the following include flags:

| Name             | Accepted Values          |
|------------------|--------------------------|

{% endcomment -%}
apiVersion: v1
kind: ServiceAccount
metadata:
  name: tigera-fluentd
  namespace: kube-system
---
kind: DaemonSet
apiVersion: apps/v1
metadata:
  name: tigera-fluentd-node
  namespace: kube-system
  labels:
    k8s-app: tigera-fluentd-node
spec:
  selector:
    matchLabels:
      k8s-app: tigera-fluentd-node
  updateStrategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 1
  template:
    metadata:
      labels:
        k8s-app: tigera-fluentd-node
    spec:
      nodeSelector:
        beta.kubernetes.io/os: linux
      tolerations:
        # Make sure {{objname}} gets scheduled on all nodes.
        - effect: NoSchedule
          operator: Exists
        - effect: NoExecute
          operator: Exists
      serviceAccountName: tigera-fluentd
      initContainers: []
      containers:
        - name: fluentd
          image: {{site.data.versions[page.version].first.dockerRepo}}/{{site.imageNames["fluentd"]}}:{{site.data.versions[page.version].first.components["fluentd"].version}}
          volumeMounts:
            - name: var-log-calico
              mountPath: /var/log/calico
      volumes:
        - name: var-log-calico
          hostPath:
            type: DirectoryOrCreate
            path: /var/log/calico
